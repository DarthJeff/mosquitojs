/*! mosquitojs - v0.1.1 - 2016-03-31
* Copyright (c) 2016 Jeff Brannon; Licensed MIT */
"use strict";window.mosquito=new function(){function a(a){function b(a){for(var b=0;b<n.length;b++){var c=n[b].service(a);if(void 0!==c){if(void 0===c.instance)switch(c.serviceType){case g.service:case g.observableInterface:c.instance=h(c);break;default:c.instance=e(c)}return c.instance}}throw"Service undefined: "+a}function c(a){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c}function e(a){if(void 0!==a.observableInterfaces)for(var b=0;b<a.observableInterfaces.length;b++){var d=a.observableInterfaces[b];void 0===f[d]&&(f[d]=[]),f[d].push(a)}var e=c(a.dependentServices);return a.constructor.apply(this,e)}function h(a){return new e(a)}function i(a,b,c,d,e){if(d){if(void 0!==p[b]&&!e)throw"Service already defined: "+b;var f={serviceType:a,dependentServices:c,constructor:d};return l(f),p[b]=f}return p[b]}function j(a){var b={dependentServices:[],constructor:a};return a instanceof Array&&(b.constructor=a.pop(),b.dependentServices=a),b}function k(a,b){return b=m(b),function(){this.next=function(c,d){if(-1===b.indexOf(c))throw"Observable method not declared: "+c;var e=f[a];if(void 0!==e)for(var g=0;g<e.length;g++)void 0!==e[g].instance&&e[g].instance[c](d)}}}function l(a){a.fromObservableInterface=function(b){b=m(b),a.observableInterfaces=b}}function m(a){return a instanceof Array==!1&&(a=[a]),a}a.push(this);var n=a,o=[],p=[];this.controller=function(a,b){if(b){if(void 0!==o[a])throw"Controller already defined: "+a;return o[a]=j(b),l(o[a]),o[a]}if(void 0===o[a])throw"Controller undefined: "+a;return void 0===o[a].instance&&(o[a].instance=h(o[a])),o[a].instance},this.service=function(a,b){var c=j(b);return i(g.service,a,c.dependentServices,c.constructor)},this.factory=function(a,b){var c=j(b);return i(g.factory,a,c.dependentServices,c.constructor)},this.provider=function(a,b){var c=i(g.provider,a,[],b),d=h(c),e=j(d.$get);return i(g.provider,a,e.dependentServices,e.constructor,!0)},this.observableInterface=function(a,b){return i(g.observableInterface,a,[],k(a,b))},this.run=function(a){if(void 0===a)throw"Run method undefined";var b=j(a);d.push(b),1===d.length&&(document.onreadystatechange=function(){if("complete"===document.readyState)for(var a=0;a<d.length;a++){var b=c(d[a].dependentServices);d[a].constructor.apply(this,b)}})}}function b(a){if(void 0===e[a])throw"Module undefined: "+a;return e[a]}function c(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push(b(e))}return c}var d=[],e=[],f=[],g={service:1,factory:2,provider:3,observableInterface:4};this.module=function(d,f){if(!f)return b(d);if(void 0!==e[d])throw"Module already defined: "+d;try{return e[d]=new a(c(f))}catch(g){throw"Error defining module: "+d+" - "+g}}};
