<!DOCTYPE html>
<head>
    <title>Mosquito Testing</title>
    <script type="text/javascript" src="app/js/mosquito.js"></script>
</head>
Mosquito Testing
<body>
    <script type="text/javascript">
        "use strict";

        mosquito.run(function(){
            module.controller('gameController');
        });
        mosquito.run(function(){
            console.log(111);
        });

        var module = mosquito.module('module1', []);
        module.observableInterface('oiGameLoop', ['update', 'render']);
        module.observableInterface('oiKeypad', ['keydown']);

        module.factory('factoryTest', ['oiGameLoop', function(oiGameLoop){
            return{
                factoryCall: function(){
                    console.log('I am a factory');
                    oiGameLoop.next('render', 233);
                }
            };
        }]);
        module.service('serviceTest', ['factoryTest', function(factoryTest){
            this.serviceCall = function(){
                console.log('I am a service');
                factoryTest.factoryCall();
            }

            this.render = function(params) { console.log('render service call', params); }
            this.keydown = function(params) { console.log('keydown service call', params); }

        }]).fromObservableInterface(['oiGameLoop', 'oiKeypad']);

        module.controller('gameController', ['oiGameLoop', 'oiKeypad', 'serviceTest', function(oiGameLoop, oiKeypad, serviceTest) {
            serviceTest.serviceCall();

            setTimeout(function(){ oiKeypad.next('keydown', 789); }, 3000);

            this.render = function(params) { console.log('render controller call', params); }
            this.keydown = function(params) { console.log('keydown controller call', params); }

        }]).fromObservableInterface(['oiGameLoop', 'oiKeypad']);

    </script>
</body>
